<!-- templates/news/digest_card.html -->

<div class="digest-card border rounded p-4 shadow mb-4 bg-white max-w-3xl mx-auto">
  <h3 class="text-xl font-semibold text-gray-800 mb-3">{{ card.headline }}</h3>

  <p class="mb-2"><strong class="text-gray-700">Signal:</strong> {{ card.signal }}</p>
  <p class="mb-2"><strong class="text-gray-700">Context:</strong> {{ card.context }}</p>

  {% if card.entities or card.topics %}
    <div class="mb-2">
      <strong class="text-gray-700">Tags:</strong>
      {% if card.entities %}
        <div class="mt-1 ml-4">
          <p class="text-sm text-gray-600 mb-1 font-medium">Entities:</p>
          {% for label, value in card.entities %}
            <span class="inline-block bg-blue-100 text-blue-800 px-2 py-1 text-xs rounded mr-2 mb-1 border border-blue-200">
              {{ value }} <span class="text-gray-500">({{ label }})</span>
            </span>
          {% endfor %}
        </div>
      {% endif %}
      {% if card.topics %}
        <div class="mt-1 ml-4">
          <p class="text-sm text-gray-600 mb-1 font-medium">Topics:</p>
          {% for tag in card.topics %}
            <span class="inline-block bg-green-100 text-green-800 px-2 py-1 text-xs rounded mr-2 mb-1 border border-green-200">
              {{ tag }}
            </span>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  {% endif %}

  {% if card.sentiment %}
    <p class="mb-2">
      <strong class="text-gray-700">Sentiment:</strong>
      <span class="capitalize text-sm {{ card.sentiment }}">{{ card.sentiment }}</span>
    </p>
  {% endif %}

  <p class="mb-2"><strong class="text-gray-700">Action:</strong> {{ card.action }}</p>

  <p class="text-xs text-gray-500 mt-3">
    Published: {{ card.published_at }} |
    <a href="{{ card.url }}" target="_blank" class="underline text-blue-600">View Source</a>
  </p>
</div>
